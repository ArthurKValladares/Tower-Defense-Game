# Dear ImGui
set(IMGUI_DIR ../vendor/imgui)
include_directories(${IMGUI_DIR} ${IMGUI_DIR}/backends)
set(IMGUI_SRCS
    ${IMGUI_DIR}/backends/imgui_impl_sdl3.cpp
    ${IMGUI_DIR}/backends/imgui_impl_vulkan.cpp
    ${IMGUI_DIR}/imgui.cpp
    ${IMGUI_DIR}/imgui_draw.cpp
    ${IMGUI_DIR}/imgui_tables.cpp
    ${IMGUI_DIR}/imgui_widgets.cpp
    ${IMGUI_DIR}/imgui_demo.cpp
)

add_executable(src 
    main.cpp
    vk_engine.cpp
    vk_initializers.cpp
    vk_image.cpp
    vk_descriptors.cpp
    vk_string.cpp
    vk_pipelines.cpp
    vk_loader.cpp
    vk_gltf_material.cpp
    vk_renderable.cpp
    camera.cpp
    ${IMGUI_SRCS}
)

target_compile_features(src PRIVATE cxx_std_23)
set_target_properties(src PROPERTIES CXX_EXTENSIONS off CXX_STANDARD_REQUIRED on)

if (MSVC)
    # Maybe /W4 /Wall instead of /W3
    target_compile_options(src PRIVATE /W3 /sdl /external:anglebrackets /external:W2 /fsanitize=address /wd4068)
    add_compile_definitions(_DISABLE_VECTOR_ANNOTATION _DISABLE_STRING_ANNOTATION)
else ()
    target_compile_options(src PRIVATE -Wall -Wextra -Wpedantic -isystem)
endif ()